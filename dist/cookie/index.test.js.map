{"version":3,"sources":["../../src/cookie/index.test.ts"],"sourcesContent":["import { serializeCookie, parseCookies } from \"./index.js\";\nimport { describe, test, expect } from \"vitest\";\n\ndescribe(\"serializeCookie()\", () => {\n\ttest(\"serializes cookie\", () => {\n\t\tconst currDate = new Date();\n\t\tconst expected = `message=hello; Domain=example.com; Expires=${currDate.toUTCString()}; HttpOnly; Max-Age=60; Path=/foo; SameSite=Lax; Secure`;\n\t\tconst result = serializeCookie(\"message\", \"hello\", {\n\t\t\tdomain: \"example.com\",\n\t\t\texpires: currDate,\n\t\t\thttpOnly: true,\n\t\t\tmaxAge: 60,\n\t\t\tpath: \"/foo\",\n\t\t\tsameSite: \"lax\",\n\t\t\tsecure: true\n\t\t});\n\t\texpect(result).toBe(expected);\n\t});\n\ttest(\"escapes name and value\", () => {\n\t\tconst expected = `%20-%5E%C2%A5%40%5B%3B%3A%5D%2C.%2F_!%22%23%24%25%26'()0%3D~%7C%60%7B%2B*%7D%3C%3E%3F%5C=%20-%5E%C2%A5%40%5B%3B%3A%5D%2C.%2F_!%22%23%24%25%26'()0%3D~%7C%60%7B%2B*%7D%3C%3E%3F%5C`;\n\t\tconst result = serializeCookie(\n\t\t\t\" -^짜@[;:],./_!\\\"#$%&'()0=~|`{+*}<>?\\\\\",\n\t\t\t\" -^짜@[;:],./_!\\\"#$%&'()0=~|`{+*}<>?\\\\\",\n\t\t\t{}\n\t\t);\n\t\texpect(result).toBe(expected);\n\t});\n});\n\ndescribe(\"parseCookies()\", () => {\n\ttest(\"parse cookie header\", () => {\n\t\tconst cookies = parseCookies(\"message1=hello; message2=bye\");\n\t\texpect(cookies.get(\"message1\")).toBe(\"hello\");\n\t\texpect(cookies.get(\"message2\")).toBe(\"bye\");\n\t\texpect(cookies.get(\"message3\")).toBe(undefined);\n\t});\n\ttest(\"reads empty value\", () => {\n\t\tconst cookies = parseCookies(\"message1=; message2\");\n\t\texpect(cookies.get(\"message1\")).toBe(\"\");\n\t\texpect(cookies.get(\"message2\")).toBe(\"\");\n\t});\n\ttest(\"decodes escaped name and values\", () => {\n\t\tconst cookies = parseCookies(\n\t\t\t`%20-%5E%C2%A5%40%5B%3B%3A%5D%2C.%2F_!%22%23%24%25%26'()0%3D~%7C%60%7B%2B*%7D%3C%3E%3F%5C=%20-%5E%C2%A5%40%5B%3B%3A%5D%2C.%2F_!%22%23%24%25%26'()0%3D~%7C%60%7B%2B*%7D%3C%3E%3F%5C`\n\t\t);\n\t\texpect(cookies.get(\" -^짜@[;:],./_!\\\"#$%&'()0=~|`{+*}<>?\\\\\")).toBe(\n\t\t\t\" -^짜@[;:],./_!\\\"#$%&'()0=~|`{+*}<>?\\\\\"\n\t\t);\n\t});\n});\n"],"mappings":"AAAA,SAAS,iBAAiB,oBAAoB;AAC9C,SAAS,UAAU,MAAM,cAAc;AAEvC,SAAS,qBAAqB,MAAM;AACnC,OAAK,qBAAqB,MAAM;AAC/B,UAAM,WAAW,oBAAI,KAAK;AAC1B,UAAM,WAAW,8CAA8C,SAAS,YAAY,CAAC;AACrF,UAAM,SAAS,gBAAgB,WAAW,SAAS;AAAA,MAClD,QAAQ;AAAA,MACR,SAAS;AAAA,MACT,UAAU;AAAA,MACV,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ;AAAA,IACT,CAAC;AACD,WAAO,MAAM,EAAE,KAAK,QAAQ;AAAA,EAC7B,CAAC;AACD,OAAK,0BAA0B,MAAM;AACpC,UAAM,WAAW;AACjB,UAAM,SAAS;AAAA,MACd;AAAA,MACA;AAAA,MACA,CAAC;AAAA,IACF;AACA,WAAO,MAAM,EAAE,KAAK,QAAQ;AAAA,EAC7B,CAAC;AACF,CAAC;AAED,SAAS,kBAAkB,MAAM;AAChC,OAAK,uBAAuB,MAAM;AACjC,UAAM,UAAU,aAAa,8BAA8B;AAC3D,WAAO,QAAQ,IAAI,UAAU,CAAC,EAAE,KAAK,OAAO;AAC5C,WAAO,QAAQ,IAAI,UAAU,CAAC,EAAE,KAAK,KAAK;AAC1C,WAAO,QAAQ,IAAI,UAAU,CAAC,EAAE,KAAK,MAAS;AAAA,EAC/C,CAAC;AACD,OAAK,qBAAqB,MAAM;AAC/B,UAAM,UAAU,aAAa,qBAAqB;AAClD,WAAO,QAAQ,IAAI,UAAU,CAAC,EAAE,KAAK,EAAE;AACvC,WAAO,QAAQ,IAAI,UAAU,CAAC,EAAE,KAAK,EAAE;AAAA,EACxC,CAAC;AACD,OAAK,mCAAmC,MAAM;AAC7C,UAAM,UAAU;AAAA,MACf;AAAA,IACD;AACA,WAAO,QAAQ,IAAI,0CAAuC,CAAC,EAAE;AAAA,MAC5D;AAAA,IACD;AAAA,EACD,CAAC;AACF,CAAC;","names":[]}