{"version":3,"sources":["../../src/encoding/base64.test.ts"],"sourcesContent":["import { describe, expect, test } from \"vitest\";\nimport { base64 } from \"./base64.js\";\n\ndescribe(\"Base64.encode()\", () => {\n\ttest(\"Generates valid string\", () => {\n\t\tconst cases = [0, 1, 2, 3, 4, 5, 6];\n\t\tfor (const length of cases) {\n\t\t\tconst data = crypto.getRandomValues(new Uint8Array(length));\n\t\t\texpect(base64.encode(data)).toBe(Buffer.from(data).toString(\"base64\"));\n\t\t}\n\t});\n\ttest(\"Omits padding\", () => {\n\t\tconst data = crypto.getRandomValues(new Uint8Array(4));\n\t\tconst result = base64.encode(data, {\n\t\t\tincludePadding: false\n\t\t});\n\t\tconst expected = base64.encode(data).replaceAll(\"=\", \"\");\n\t\texpect(result).toBe(expected);\n\t});\n});\n\ndescribe(\"Base64.decode()\", () => {\n\ttest(\"Returns encoded data\", () => {\n\t\tconst cases = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\n\t\tfor (const length of cases) {\n\t\t\tconst data = crypto.getRandomValues(new Uint8Array(length));\n\t\t\tconst encoded = base64.encode(data);\n\t\t\texpect(base64.decode(encoded)).toStrictEqual(data);\n\t\t}\n\t});\n\ttest(\"Throws if data is missing padding in strict mode\", () => {\n\t\tconst data = crypto.getRandomValues(new Uint8Array(4));\n\t\tconst encoded = base64.encode(data, {\n\t\t\tincludePadding: false\n\t\t});\n\t\texpect(() => base64.decode(encoded.replaceAll(\"=\", \"\"))).toThrow();\n\t});\n\ttest(\"Accepts encoded data with missing padding if not in strict mode\", () => {\n\t\tconst data = crypto.getRandomValues(new Uint8Array(4));\n\t\tconst encoded = base64.encode(data, {\n\t\t\tincludePadding: false\n\t\t});\n\t\tconst result = base64.decode(encoded.replaceAll(\"=\", \"\"), {\n\t\t\tstrict: false\n\t\t});\n\t\texpect(result).toStrictEqual(data);\n\t});\n});\n"],"mappings":"AAAA,SAAS,UAAU,QAAQ,YAAY;AACvC,SAAS,cAAc;AAEvB,SAAS,mBAAmB,MAAM;AACjC,OAAK,0BAA0B,MAAM;AACpC,UAAM,QAAQ,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;AAClC,eAAW,UAAU,OAAO;AAC3B,YAAM,OAAO,OAAO,gBAAgB,IAAI,WAAW,MAAM,CAAC;AAC1D,aAAO,OAAO,OAAO,IAAI,CAAC,EAAE,KAAK,OAAO,KAAK,IAAI,EAAE,SAAS,QAAQ,CAAC;AAAA,IACtE;AAAA,EACD,CAAC;AACD,OAAK,iBAAiB,MAAM;AAC3B,UAAM,OAAO,OAAO,gBAAgB,IAAI,WAAW,CAAC,CAAC;AACrD,UAAM,SAAS,OAAO,OAAO,MAAM;AAAA,MAClC,gBAAgB;AAAA,IACjB,CAAC;AACD,UAAM,WAAW,OAAO,OAAO,IAAI,EAAE,WAAW,KAAK,EAAE;AACvD,WAAO,MAAM,EAAE,KAAK,QAAQ;AAAA,EAC7B,CAAC;AACF,CAAC;AAED,SAAS,mBAAmB,MAAM;AACjC,OAAK,wBAAwB,MAAM;AAClC,UAAM,QAAQ,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE;AAC/C,eAAW,UAAU,OAAO;AAC3B,YAAM,OAAO,OAAO,gBAAgB,IAAI,WAAW,MAAM,CAAC;AAC1D,YAAM,UAAU,OAAO,OAAO,IAAI;AAClC,aAAO,OAAO,OAAO,OAAO,CAAC,EAAE,cAAc,IAAI;AAAA,IAClD;AAAA,EACD,CAAC;AACD,OAAK,oDAAoD,MAAM;AAC9D,UAAM,OAAO,OAAO,gBAAgB,IAAI,WAAW,CAAC,CAAC;AACrD,UAAM,UAAU,OAAO,OAAO,MAAM;AAAA,MACnC,gBAAgB;AAAA,IACjB,CAAC;AACD,WAAO,MAAM,OAAO,OAAO,QAAQ,WAAW,KAAK,EAAE,CAAC,CAAC,EAAE,QAAQ;AAAA,EAClE,CAAC;AACD,OAAK,mEAAmE,MAAM;AAC7E,UAAM,OAAO,OAAO,gBAAgB,IAAI,WAAW,CAAC,CAAC;AACrD,UAAM,UAAU,OAAO,OAAO,MAAM;AAAA,MACnC,gBAAgB;AAAA,IACjB,CAAC;AACD,UAAM,SAAS,OAAO,OAAO,QAAQ,WAAW,KAAK,EAAE,GAAG;AAAA,MACzD,QAAQ;AAAA,IACT,CAAC;AACD,WAAO,MAAM,EAAE,cAAc,IAAI;AAAA,EAClC,CAAC;AACF,CAAC;","names":[]}